"use strict";function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function guid(){return(S4()+S4()+"-"+S4()+"-4"+S4().substr(0,3)+"-"+S4()+"-"+S4()+S4()+S4()).toLowerCase()}angular.module("p20ContextSensingApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/morning",{templateUrl:"views/morning.html",controller:"MorningCtrl"}).when("/evening",{templateUrl:"views/evening.html",controller:"EveningCtrl"}).when("/evening2",{templateUrl:"views/evening2.html",controller:"Evening2Ctrl"}).when("/evening3",{templateUrl:"views/evening3.html",controller:"Evening3Ctrl"}).when("/evening4",{templateUrl:"views/evening4.html",controller:"Evening4Ctrl"}).when("/completedSurvey",{templateUrl:"views/completedsurvey.html",controller:"CompletedsurveyCtrl"}).when("/mockups",{templateUrl:"views/mockups.html",controller:"MockupsCtrl"}).when("/location_finder",{templateUrl:"views/location_finder.html",controller:"LocationFinderCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("p20ContextSensingApp").controller("MainCtrl",["$scope","$location",function(a,b){a.showHome=!0,a.userExists=void 0==localStorage.getItem("userId")?!1:!0,a.createUser=function(){localStorage.setItem("userId",$("input[name=userId").val()),localStorage.setItem("amPromptTime",$("input[name=amprompttime").val()),localStorage.setItem("pmPromptTime",$("input[name=pmprompttime").val());var a=new Date,c=new Date,d=new Date,e=new Date;a.setHours($("input[name=amprompttime").val().split(":")[0]),a.setMinutes($("input[name=amprompttime").val().split(":")[1]),c.setHours($("input[name=pmprompttime").val().split(":")[0]),c.setMinutes($("input[name=pmprompttime").val().split(":")[1]),d.setHours($("input[name=amprompttime").val().split(":")[0]),d.setMinutes(parseInt($("input[name=amprompttime").val().split(":")[1])+1),e.setHours($("input[name=pmprompttime").val().split(":")[0]),e.setMinutes(parseInt($("input[name=pmprompttime").val().split(":")[1])+1),console.log(a,c);var f=new PurpleRobot,g=f.showNativeDialog({title:"P20",message:"Can you answer a few questions?",buttonLabelA:"Yes",scriptA:f.launchApplication("edu.northwestern.cbits.p20cs"),buttonLabelB:"No",scriptB:f.emitToast("Thanks, we will check in later!"),tag:"p20d",priority:3});(new PurpleRobot).updateTrigger({script:g,startAt:a,endAt:d}).execute(),(new PurpleRobot).updateTrigger({script:g,startAt:c,endAt:e}).execute(),b.path("/")}}]),angular.module("p20ContextSensingApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("p20ContextSensingApp").controller("MorningCtrl",["$scope","$location","Submitdata",function(a,b,c){localStorage.setItem("surveyName","morning"),localStorage.setItem("sessionGUID",guid()),a.mood=0,a.alertness=0,a.questions=[{name:"bedtime",label:"What time did you go to bed last night?",type:"time"},{name:"waketime",label:"What time did you wake up this morning?",type:"time"},{name:"numTimesWaking",label:"How many times did you wake up during the night?",type:"number"}],a.submitForm=function(a){c.submit(),console.log(a),b.path(a)}}]),angular.module("p20ContextSensingApp").controller("EveningCtrl",["$scope","$location","Submitdata",function(a,b,c){localStorage.setItem("surveyName","morning"),localStorage.setItem("sessionGUID",guid()),a.mood=0,a.alertness=0,a.social=4,a.submitForm=function(a){c.submit(),console.log(a),b.path(a)}}]),angular.module("p20ContextSensingApp").controller("Evening2Ctrl",["$scope","$location","Submitdata",function(a,b,c){a.questions=[{name:"total_people_interacted_with",label:"How many people did you interact with today?",type:"number"},{name:"num_friends_interacted_with",label:"How many of these people were friends?",type:"number"},{name:"num_family_members_interacted_with",label:"How many of these people were family members?",type:"number"},{name:"num_coworkers_interacted_with",label:"How many of these people were co-workers?",type:"number"}],a.submitForm=function(a){c.submit(),console.log(a),b.path(a)}}]),angular.module("p20ContextSensingApp").controller("Evening3Ctrl",["$scope","$location","Submitdata",function(a,b,c){a.questions=[{name:"total_interactions",label:"How many interactions did you have with people today?",type:"number"},{name:"num_friends_interactions",label:"How many of these interactions were with friends?",type:"number"},{name:"num_family_members_interactions",label:"How many of these interactions were with family members?",type:"number"},{name:"num_coworkers_interactions",label:"How many of these interactions were with co-workers?",type:"number"},{name:"activity_level",label:"How active were you?",labelStyles:"",type:"range",styles:"",visibleMin:0,visibleMax:10,actualMin:3,actualMax:7,showUnavailableRange:!0,showUnavailableRangeStyles:"",stepSize:1,responseRequired:"required",value:4,ticks:[3,4,5,6,7],optionRangeStyles:"margin-top:-8px;",optionRanges:[{label:"Bottom","class":"alert-danger",widthPercentage:30,styles:""},{label:"Middle","class":"alert-warning",widthPercentage:40,styles:""},{label:"Top","class":"alert-success",widthPercentage:30,styles:""}]}],a.submitForm=function(a){c.submit(),console.log(a),b.path(a)}}]),angular.module("p20ContextSensingApp").controller("Evening4Ctrl",["$scope","$location","Submitdata",function(a,b,c){a.active=4,a.questions=[{name:"total_places_visited",label:"How many places did you visit outside of your home and work today?",type:"number"},{name:"enjoyable_places_visited",label:"How many of these were places to do something enjoyable (i.e., movie theater, restaurant, park, concert, etc.)?",type:"number"},{name:"got_something_done_visited",label:"How many of these were places to get something done (i.e., shopping, bank, laundromat, other errands, etc.)?",type:"number"},{name:"exercise_visited",label:"How many of these were places to exercise (i.e., gym, outdoor space, etc.)?",type:"number"},{name:"spiritual_visited",label:"How many of these were places for spiritual activities (i.e., praying, worshipping, meditating)?",type:"number"}],a.submitForm=function(a){c.submit(),console.log(a),b.path(a)}}]),angular.module("p20ContextSensingApp").service("Submitdata",function(){var a={};return a.submit=function(){var a=(new PurpleRobot,localStorage.userId),b=localStorage.sessionGUID,c=localStorage.surveyName;$.each($("form").serializeArray(),function(d,e){var f={user:a,surveyName:c,session:b,name:e.name,value:e.value};(new PurpleRobot).emitReading("surveydata",f).execute()})},a}),angular.module("p20ContextSensingApp").controller("CompletedsurveyCtrl",["$scope","$sanitize",function(a){(localStorage.surveyName="morning")&&(localStorage.num_morning_surveys=void 0==localStorage.num_morning_surveys?1:JSON.parse(localStorage.num_morning_surveys)+1),(localStorage.surveyName="evening")&&(localStorage.num_evening_surveys=void 0==localStorage.num_evening_surveys?1:JSON.parse(localStorage.num_morning_surveys)+1),void 0!==localStorage.num_evening_surveys&&(a.num_evening_surveys_report="<h3>Number of evening surveys completed:</h3>"+localStorage.num_evening_surveys),void 0!==localStorage.num_morning_surveys&&(a.num_morning_surveys_report="<h3>Number of morning surveys completed:</h3>"+localStorage.num_morning_surveys),localStorage.removeItem("sessionGUID"),localStorage.removeItem("surveyName")}]),angular.module("p20ContextSensingApp").controller("MockupsCtrl",["$scope",function(){console.log("mockups.js");var a=[5,10,15,20,25],b=500,c=50,d=d3.select("body").append("svg").attr("width",b).attr("height",c),e=d.selectAll("circle").data(a).enter().append("circle");e.attr("cx",function(a,b){return 50*b+25}).attr("cy",c/2).attr("r",function(a){return a})}]),angular.module("p20ContextSensingApp").controller("LocationFinderCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("p20ContextSensingApp").directive("questionPlayer",function(){return{template:"<div></div>",restrict:"E",link:function(a,b){b.text("this is the questionPlayer directive")}}});